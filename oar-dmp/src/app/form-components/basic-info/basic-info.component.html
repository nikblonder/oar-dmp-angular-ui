<div class="dmpSection">
  <div class="header">Basic Information</div>    
  <table>
    <tr>
      <td class="description">Title</td>
      <td><input type="text" [formControl]="basicInfoForm.controls['title']" class="wide"></td>
    </tr>
    <tr class="hidden-row">
      <td class="description">DMP Idntifier</td>
      <!-- hide this  -->
      <td>
        <div>
          <input type="radio" id="dmpHandle" name="dmpIdType" value="dmpHandle" checked>
          <label for="dmpHandle">handle</label>
        </div>
        <div>
          <input type="radio" id="dmpDoi" name="dmpIdType" value="dmpDoi">
          <label for="dmpDoi">doi</label>
        </div>
        <div>
          <input type="radio" id="dmpArk" name="dmpIdType" value="dmpArk">
          <label for="dmpArk">ark</label>
        </div>
        <div>
          <input type="radio" id="dmpUrl" name="dmpIdType" value="dmpUrl">
          <label for="dmpUrl">url</label>
        </div>
        <div>
          <input type="radio" id="dmpOther" name="dmpIdType" value="dmpOther">
          <label for="dmpOther">other</label>
        </div>
        <input type="text" placeholder="DMP Idntifier">
      </td>
    </tr>
    <tr>
      <td class="description">Start Date</td>
      <td><input type="date" [formControl]="basicInfoForm.controls['startDate']"></td>
    </tr>
    <tr>
      <td class="description">End Date</td>
      <td><input type="date" [formControl]="basicInfoForm.controls['endDate']"></td>
    </tr>
    <tr>
      <td class="description">Make DMP searchable</td>
      <!-- move this into basic information section -->
      <td>
        <div>
          <input type="radio" id="searchDMPY" name="searchDMP" value="yes" [checked]='true' [formControl]="basicInfoForm.controls['dmpSearchable']">
          <label for="searchDMPY">Yes</label>

          <input type="radio" id="searchDMPN" name="searchDMP" value="no" [formControl]="basicInfoForm.controls['dmpSearchable']">
          <label for="searchDMPN">No</label>
        </div>          
      </td>
    </tr>
    <tr>
      <td class="description">Funding</td>
      <td>
        <div>
          <input type="radio" id="operatingUnit" name="grant_source" value="Operating Unit" checked 
          [formControl]="basicInfoForm.controls['grant_source']">
          <label for="operatingUnit">Operating Unit</label>
        </div>
        <div>
          <input type="radio" id="divProjTrkNum" name="grant_source" value="Division Project Tracking Number" 
          [formControl]="basicInfoForm.controls['grant_source']">
          <label for="divProjTrkNum">Division Project Tracking Number</label>
        </div>
        <div>
          <input type="radio" id="grantNum" name="grant_source" value="Grant Number"
          [formControl]="basicInfoForm.controls['grant_source']">
          <label for="grantNum">Grant Number</label>
        </div>
        <div>
          <input type="radio" id="contractNum" name="grant_source" value="Contract Number"
          [formControl]="basicInfoForm.controls['grant_source']">
          <label for="contractNum">Contract Number</label>
        </div>
        <div>
          Funding Number:&nbsp;
          <input type="text" placeholder="Funding Number" [formControl]="basicInfoForm.controls['grant_id']">
        </div>
        
      </td>
    </tr>
    <tr>
      <td>Project Description</td>
      <td><textarea name="projectDescription" cols="80" rows="5" placeholder="Description behind the science of the project"
        [formControl]="basicInfoForm.controls['projectDescription']"></textarea></td>
    </tr>
    <tr>
      <td>Organizations associated with this DMP</td>
      <td>
        <!-- <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Organization</mat-label>
          <input type="text"
                 placeholder="Pick one"
                 aria-label="NIST Organization"
                 matInput
                 [formControl]="basicInfoForm.controls['nistOrganization']"
                 [matAutocomplete]="nistOrganization">
          <mat-autocomplete 
            #nistOrganization="matAutocomplete"
            [displayWith]="displaySelectedOrganization"
          >
            <mat-option *ngFor="let option of fltr_Prim_NIST_Contact | async" [value]="option">
              {{option.lastName + ", " + option.firstName}}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field> -->
      </td>
    </tr>
    
  </table>
  <div class="dmpSubSection">
    <div class="sub-category">Organization(s) Associated With This DMP</div>  
    <p class="instruction"> Add / Remove Organization(s) associated with this DMP</p>
    
    <article class="table-header">
      
      <!-- 
        set button type to 'button' to prevent it from acting like a submit button and triggering
        updateDMP in dmp.services.ts 
      -->
      <button type="button" class="button-remove-rows" mat-button (click)="removeSelectedRows()" [disabled]="disableRemove">Remove Selected</button>
      <button type="button" class="button-clear-table" mat-button (click)="clearTable()" [disabled]="disableClear">Clear</button>
      <button type="button" class="button-add-row" mat-button (click)="addRow()" [disabled]="disableAdd">Add</button>
    </article>
    <p *ngIf="errorMessage" class="error-msg">{{ errorMessage }}</p>
    
  
    <table mat-table [dataSource]="dmpOrganizations" class="mat-elevation-z8 form-table">
    
      <!-- 
        iterate over columns 
      -->
      <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchema">
        <!-- 
          table headers 
        -->
        <th mat-header-cell *matHeaderCellDef>  {{ col.label }} </th>
        <!-- 
          table cells 
        -->
        <td mat-cell *matCellDef="let element">  
          <!-- table cell display default cell display -->
          <div [ngSwitch]="col.type" *ngIf="!element.isEdit">
            <!-- Switch if the column isSelected to display the checkbox in the table cell -->
            <ng-container *ngSwitchCase="'isSelected'">
              <mat-checkbox
                (change)="element.isSelected = $event.checked"
              ></mat-checkbox>
            </ng-container>
  
            <!-- Switch if the column isEdit to display the Edit and delete buttons in the table cell -->
            <div class="btn-edit" *ngSwitchCase="'isEdit'">
              <button class="button-edit" mat-button (click)="element.isEdit = !element.isEdit">
                Edit
              </button>
              <button
                mat-button
                class="button-remove"
                (click)="removeRow(element.id)"
              >
                Delete
              </button>
            </div>
            
            <!-- default cell -->
            <span *ngSwitchDefault>
              {{ element[col.key] }}
            </span>
          </div>
  
          <!-- table cell display if edit button has been clicked -->
          <div [ngSwitch]="col.type" *ngIf="element.isEdit">
            <!-- no input for the selected checkbox column cell -->
            <div *ngSwitchCase="'isSelected'"></div>
            
            <!-- Switch if the column isEdit to display the Done button in the table cell -->
            <div class="btn-edit" *ngSwitchCase="'isEdit'">
              <button type="button" mat-button (click)="onDoneClick(element)">
                Done
              </button>
            </div>
  
            <!-- default column cell -->
            <mat-form-field class="form-input" *ngSwitchDefault>
              <input [type]="col.type" matInput [(ngModel)]="element[col.key]" />
            </mat-form-field>
  
          </div>
  
        </td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>